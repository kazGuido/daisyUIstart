import{Y as f,r as u,c as l,i as c,x as g,a as s,l as y,j as p,v as _,t as x,d,o as i,Z as w}from"./CDjqcE0o.js";import{u as k}from"./BbLLU-7f.js";const S={class:"hero min-h-screen bg-base-200 relative"},L={key:0,class:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"},T=s("div",{class:"btn loading"},"loading",-1),V=[T],j={key:1,class:"hero-content flex-col lg:flex-row-reverse"},N=s("div",{class:"text-center lg:text-left"},[s("h1",{class:"text-5xl font-bold"},"SuperTicket !"),s("p",{class:"py-6"},[s("b",null,"Simplify your life !"),d(),s("br"),d("Your solution to organize your events."),s("br"),d("Your place to buy "),s("b",null,"any ticket")])],-1),P={class:"card shrink-0 w-full max-w-sm shadow-2xl bg-base-100"},U={class:"form-control"},q=s("label",{class:"label"},[s("span",{class:"label-text"},"Email")],-1),B={class:"form-control"},C=s("label",{class:"label"},[s("span",{class:"label-text"},"Password")],-1),D=s("label",{class:"label"},[s("a",{href:"#",class:"label-text-alt link link-hover"},"Forgot password?")],-1),E=s("div",{class:"form-control mt-6"},[s("button",{class:"btn btn-primary"},"Login")],-1),Y={key:2,class:"stats shadow"},z={class:"stat"},H=s("div",{class:"stat-title"},"Welcome back!",-1),I={class:"stat-value"},M=s("div",{class:"stat-desc"},"Here's your quick stats:",-1),O=s("div",{class:"stat-figure text-primary"},[s("div",{class:"text-4xl"},"89,400"),s("div",{class:"text-base"},"Page Views")],-1),F={__name:"signin",setup(R){const h=w(),t=k(),b=f(),n=u(""),r=u("");async function m(){t.setLoading(!0);try{const o=await fetch(`${h.public.apiUrl}/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.value,password:r.value})});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const e=await o.json(),a=e.user,v=e.access_token;t.logUserIn(a,v),b.push("/dashboard")}catch(o){console.error("Login error:",o.message)}finally{t.setLoading(!1)}}return(o,e)=>(i(),l("div",S,[c(t).isLoading?(i(),l("div",L,V)):g("",!0),c(t).isLoggedIn?(i(),l("div",Y,[s("div",z,[H,s("div",I,x(c(t).user.name),1),M,O])])):(i(),l("div",j,[N,s("div",P,[s("form",{onSubmit:y(m,["prevent"]),class:"card-body"},[s("div",U,[q,p(s("input",{type:"email",placeholder:"email","onUpdate:modelValue":e[0]||(e[0]=a=>n.value=a),class:"input input-bordered",required:""},null,512),[[_,n.value]])]),s("div",B,[C,p(s("input",{type:"password",placeholder:"password","onUpdate:modelValue":e[1]||(e[1]=a=>r.value=a),class:"input input-bordered",required:""},null,512),[[_,r.value]]),D]),E],32)])]))]))}};export{F as default};
