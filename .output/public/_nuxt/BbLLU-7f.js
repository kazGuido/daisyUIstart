import{af as i}from"./CDjqcE0o.js";const n=i("auth",{state:()=>({user:null,accessToken:null,isLoading:!1}),actions:{setUser(s){this.user=s,this.isLoggedIn=!!s},setLoading(s){this.isLoading=s},logUserIn(s,e){this.user=s,this.accessToken=e,this.isLoggedIn=!!s},logUserOut(){this.user=null,this.accessToken=null},checkLoggedIn(s){const e=this.accessToken;e&&(this.isLoggedIn=!0,this.fetchUserDetails(e,s))},async fetchUserDetails(s,e){try{const t=await fetch(`${e}/user`,{headers:{Authorization:`Bearer ${s}`}});if(t.ok){const o=await t.json();this.setUser(o)}else this.logUserOut()}catch(t){console.error("Failed to fetch user details",t),this.logUserOut()}}}});export{n as u};
