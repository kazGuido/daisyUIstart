import{_ as B}from"./GzbUjIM9.js";import{m as E,u as R,q,r as A,s as C,n as d,o as h,c as b,a as n,b as t,i as o,t as N,x as F,k as w,w as c,d as r}from"./CDjqcE0o.js";import{u as H,c as I,a as g,b as y}from"./BXmXOeig.js";import{u as L}from"./BbLLU-7f.js";import"./CqkleIqs.js";const $={class:"flex items-center justify-center h-full"},j={key:0,class:"bg-error-600 text-white text-sm px-4 py-3 rounded-lg mb-4"},D={class:"mb-5 flex gap-2 justify-between items-center"},U=n("label",{class:"flex gap-2 items-center text-sm"},[n("input",{type:"checkbox",class:"w-4 h-4 rounded text-primary-500 focus:ring-primary-500 transition duration-300"}),r(" Remember me ")],-1),T={class:"text-gray-600 text-sm"},Q=E({__name:"login",setup(z){R({title:"Login"});const{handleSubmit:v}=H({validationSchema:I({email:g().required().email().label("Email"),password:g().required().label("Password")})}),p=L(),V=q(),l=A(),k=C(),{store:S}=useAuthStorage(),{value:i}=y("email",void 0,{initialValue:""}),{value:u}=y("password",void 0,{initialValue:""}),_=v(async x=>{l.value="";try{const e=await $fetch("/api/auth/login",{method:"post",body:x}),m=e.token,s=e.user;S(m,s),p.user=s,p.loggedIn=!0,V.push(k.query.next||"/")}catch(e){l.value=e.data.error}});return(x,e)=>{const m=d("AuthHeader"),s=d("VInput"),f=B,P=d("VButton");return h(),b("div",$,[n("form",{class:"rounded-lg px-10 py-8 w-full max-w-md mx-auto",onSubmit:e[2]||(e[2]=(...a)=>o(_)&&o(_)(...a))},[t(m,{title:"Login",subtitle:"Please enter your credentials"}),o(l)?(h(),b("div",j,N(o(l)),1)):F("",!0),t(s,{modelValue:o(i),"onUpdate:modelValue":e[0]||(e[0]=a=>w(i)?i.value=a:null),"wrapper-class":"mb-4",name:"email",label:"Email",placeholder:"Email",hint:"Email: admin@example.com"},null,8,["modelValue"]),t(s,{modelValue:o(u),"onUpdate:modelValue":e[1]||(e[1]=a=>w(u)?u.value=a:null),"wrapper-class":"mb-4",name:"password",label:"Password",placeholder:"Password",type:"password",hint:"Password: admin"},null,8,["modelValue"]),n("div",D,[U,t(f,{to:"/auth/forgot-password",class:"text-primary-500 hover:underline font-semibold text-sm"},{default:c(()=>[r(" Forgot Password? ")]),_:1})]),t(P,{type:"submit",color:"primary",block:"",class:"mb-5"},{default:c(()=>[r(" Login ")]),_:1}),n("div",T,[r(" Don't have account? "),t(f,{to:"/auth/register",class:"text-primary-500 hover:underline font-semibold text-sm"},{default:c(()=>[r(" Register ")]),_:1})])],32)])}}});export{Q as default};
